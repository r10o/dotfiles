#!/usr/bin/sh

bspc config normal_border_color			\#202020
bspc config active_border_color			\#777777
bspc config focused_border_color		\#dddddd
bspc config presel_feedback_color		\#dddddd

bspc config split_ratio					0.5

bspc config border_width				2
bspc config window_gap					20
bspc config top_padding					25

bspc config borderless_monocle			false
bspc config gapless_monocle				false
bspc config click_to_focus				any
bspc config swallow_first_click			true
bspc config remove_disabled_monitors	true
bspc config remove_unplugged_monitors	true
bspc config merge_overlapping_monitors	true

adj=""
polybar_config=$HOME/.config/polybar/config
if [ -n "$(lsmod | grep -i nvidia)" ]; then
	adj="-1"
	polybar_config=$HOME/.config/polybar/nvidia-config
fi

xrandr --output eDP-1$adj --primary
bspc monitor primary --reset-desktops 1 2 3 4 5

if [ -n "$(xrandr | grep " connected" | grep "^DP-1")" ]; then
	xrandr --output DP-1$adj --primary
	bspc monitor primary --reset-desktops 6 7 8 9 10
fi

bspc rule --add Gimp follow=on state=floating
bspc rule --add xcalc state=floating
bspc rule --add mirage state=floating
bspc rule --add qemu state=floating
bspc rule --add cmake-gui state=floating
bspc rule --add gpick state=floating
bspc rule --add zathura state=tiled
bspc rule --add Emacs state=tiled

feh --bg-fill $HOME/pics/wallpaper/low_poly_canyon.jpg
xsetroot -cursor_name left_ptr

killall polybar
polybar top -r -l error -c $polybar_config &

if [ -n "$(xrandr | grep " connected" | grep "^DP-1")" ]; then
	polybar top -r -l error -c $polybar_config-ext &
fi
